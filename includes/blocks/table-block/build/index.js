(()=>{"use strict";var e,t={74:()=>{const e=window.React,t=window.wp.blocks,a=window.wp.blockEditor,n=window.wp.components,r=window.wp.element,l=window.wp.i18n;(0,t.registerBlockType)("nhrst-smartsync-table/table-block",{edit:({attributes:t,setAttributes:s})=>{const[o,c]=(0,r.useState)(null),[m,i]=(0,r.useState)(!0),[b,u]=(0,r.useState)(null),h=(0,a.useBlockProps)(),d={id:"ID",fname:"First Name",lname:"Last Name",email:"Email",date:"Date"};(0,r.useEffect)((()=>{p()}),[]);const p=async()=>{try{i(!0),u(null);const e=await fetch(`${nhrstSmartSyncTableCommonObj.ajax_url}?action=nhrst_get_table_data&nonce=${nhrstSmartSyncTableCommonObj.nonce}`);if(!e.ok)throw new Error("Network response was not ok");const t=await e.json();if(!t.success||!t.data)throw new Error("Invalid data received from API");c(t.data)}catch(e){u(e.message),console.error("Error fetching data:",e)}finally{i(!1)}},w=Object.keys(d);return(0,e.createElement)("div",{...h},(0,e.createElement)(a.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Column Settings","nhrst-smartsync-table"),initialOpen:!0},w?.map((a=>(0,e.createElement)(n.ToggleControl,{key:a,label:d[a],checked:t.showColumns[a],onChange:e=>s({showColumns:{...t.showColumns,[a]:e}})}))))),(0,e.createElement)("div",{className:"nhrst-table-block-wrapper"},m?(0,e.createElement)("div",{className:"nhrst-api-loading"},(0,e.createElement)(n.Spinner,null),(0,e.createElement)("p",null,(0,l.__)("Loading data...","nhrst-smartsync-table"))):b?(0,e.createElement)("div",{className:"nhrst-api-error"},(0,e.createElement)("p",null,(0,l.__)("Error loading data:","nhrst-smartsync-table")," ",b),(0,e.createElement)("button",{className:"components-button is-secondary",onClick:p},(0,l.__)("Retry","nhrst-smartsync-table"))):(()=>{if(!o?.data?.rows)return(0,e.createElement)("p",null,(0,l.__)("No data available.","nhrst-smartsync-table"));const a=Object.values(o.data.rows);return(0,e.createElement)("div",{className:"nhrst-table-block-table-wrapper"},(0,e.createElement)("h3",null,o.title),(0,e.createElement)("table",{className:"nhrst-table-block-table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,w.map((a=>t.showColumns[a]&&(0,e.createElement)("th",{key:a},d[a]))))),(0,e.createElement)("tbody",null,a.map(((a,n)=>(0,e.createElement)("tr",{key:n},w.map((r=>{return t.showColumns[r]&&(0,e.createElement)("td",{key:`${n}-${r}`},"date"===r?(s=a[r],new Date(1e3*s).toLocaleDateString()):"number"==typeof(l=a[r])?l.toLocaleString():null==l?"-":l.toString());var l,s}))))))),(0,e.createElement)("button",{className:"components-button is-secondary",onClick:p},(0,l.__)("Refresh Data","nhrst-smartsync-table")))})()))},save:()=>null})}},a={};function n(e){var r=a[e];if(void 0!==r)return r.exports;var l=a[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,a,r,l)=>{if(!a){var s=1/0;for(i=0;i<e.length;i++){for(var[a,r,l]=e[i],o=!0,c=0;c<a.length;c++)(!1&l||s>=l)&&Object.keys(n.O).every((e=>n.O[e](a[c])))?a.splice(c--,1):(o=!1,l<s&&(s=l));if(o){e.splice(i--,1);var m=r();void 0!==m&&(t=m)}}return t}l=l||0;for(var i=e.length;i>0&&e[i-1][2]>l;i--)e[i]=e[i-1];e[i]=[a,r,l]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,a)=>{var r,l,[s,o,c]=a,m=0;if(s.some((t=>0!==e[t]))){for(r in o)n.o(o,r)&&(n.m[r]=o[r]);if(c)var i=c(n)}for(t&&t(a);m<s.length;m++)l=s[m],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(i)},a=globalThis.webpackChunk_nhrst_smartsync_table_table_block=globalThis.webpackChunk_nhrst_smartsync_table_table_block||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})();var r=n.O(void 0,[350],(()=>n(74)));r=n.O(r)})();
(()=>{"use strict";var e,t={74:()=>{const e=window.React,t=window.wp.blocks,r=window.wp.blockEditor,n=window.wp.components,a=window.wp.element,l=window.wp.i18n,s=["id","fname","lname","email","date"],o=[{label:(0,l.__)("Ascending","nhrst-smartsync-table"),value:"asc"},{label:(0,l.__)("Descending","nhrst-smartsync-table"),value:"desc"}];(0,t.registerBlockType)("nhrst-smartsync-table/table-block",{edit:({attributes:t,setAttributes:c})=>{const[i,m]=(0,a.useState)(null),[d,b]=(0,a.useState)(!0),[h,u]=(0,a.useState)(null),y=(0,r.useBlockProps)(),_={id:(0,l.__)("ID","nhrst-smartsync-table"),fname:(0,l.__)("First Name","nhrst-smartsync-table"),lname:(0,l.__)("Last Name","nhrst-smartsync-table"),email:(0,l.__)("Email","nhrst-smartsync-table"),date:(0,l.__)("Date","nhrst-smartsync-table")};(0,a.useEffect)((()=>{p()}),[]);const p=async()=>{try{b(!0),u(null);const e=await fetch(`${nhrstSmartSyncTableCommonObj.ajax_url}?action=nhrst_get_table_data&nonce=${nhrstSmartSyncTableCommonObj.nonce}`);if(!e.ok)throw new Error((0,l.__)("Network response was not ok","nhrst-smartsync-table"));const t=await e.json();if(!t.success||!t.data)throw new Error((0,l.__)("Invalid data received from API","nhrst-smartsync-table"));m(t.data)}catch(e){u(e.message),console.error((0,l.__)("Error fetching data:","nhrst-smartsync-table"),e)}finally{b(!1)}},w=Object.keys(_),g=e=>({"F j, Y":{year:"numeric",month:"long",day:"numeric"},"M d, Y":{year:"numeric",month:"short",day:"2-digit"},"d/m/Y":{day:"2-digit",month:"2-digit",year:"numeric"},"m/d/Y":{month:"2-digit",day:"2-digit",year:"numeric"},"Y-m-d":{year:"numeric",month:"2-digit",day:"2-digit"}}[e]||{year:"numeric",month:"2-digit",day:"2-digit"});return(0,e.createElement)("div",{...y},(0,e.createElement)(r.InspectorControls,null,(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Column Settings","nhrst-smartsync-table"),initialOpen:!0},w?.map((r=>(0,e.createElement)(n.ToggleControl,{key:r,label:_[r],checked:t.showColumns[r],onChange:e=>c({showColumns:{...t.showColumns,[r]:e}})})))),(0,e.createElement)(n.PanelBody,{title:(0,l.__)("Table Sorting","nhrst-smartsync-table"),initialOpen:!0},(0,e.createElement)(n.SelectControl,{label:(0,l.__)("Order By","nhrst-smartsync-table"),value:t.orderBy,options:s.map((e=>({label:_[e],value:e}))),onChange:e=>c({orderBy:e})}),(0,e.createElement)(n.SelectControl,{label:(0,l.__)("Order Direction","nhrst-smartsync-table"),value:t.orderDirection,options:o,onChange:e=>c({orderDirection:e})}))),(0,e.createElement)("div",{className:"nhrst-table-block-wrapper"},d?(0,e.createElement)("div",{className:"nhrst-api-loading"},(0,e.createElement)(n.Spinner,null),(0,e.createElement)("p",null,(0,l.__)("Loading data...","nhrst-smartsync-table"))):h?(0,e.createElement)("div",{className:"nhrst-api-error"},(0,e.createElement)("p",null,(0,l.__)("Error loading data:","nhrst-smartsync-table")," ",h),(0,e.createElement)("button",{className:"components-button is-secondary",onClick:p},(0,l.__)("Retry","nhrst-smartsync-table"))):(()=>{if(!i?.data?.rows)return(0,e.createElement)("p",null,(0,l.__)("No data available.","nhrst-smartsync-table"));let r=Object.values(i.data.rows);return r.sort(((e,r)=>{const n="asc"===t.orderDirection?1:-1;return(e[t.orderBy]>r[t.orderBy]?1:-1)*n})),(0,e.createElement)("div",{className:"nhrst-table-block-table-wrapper"},(0,e.createElement)("h3",null,i.title),(0,e.createElement)("table",{className:"nhrst-table-block-table"},(0,e.createElement)("thead",null,(0,e.createElement)("tr",null,w.map((r=>t.showColumns[r]&&(0,e.createElement)("th",{key:r,onClick:()=>(e=>{if(!s.includes(e))return;const r=t.orderBy===e&&"asc"===t.orderDirection?"desc":"asc";c({orderBy:e,orderDirection:r})})(r),style:{cursor:"pointer"}},_[r]," ",t.orderBy===r?"asc"===t.orderDirection?"↑":"↓":""))))),(0,e.createElement)("tbody",null,r.map(((r,n)=>(0,e.createElement)("tr",{key:n},w.map((a=>{return t.showColumns[a]&&(0,e.createElement)("td",{key:`${n}-${a}`},"date"===a?(e=>{const t=nhrstSmartSyncTableCommonObj.date_format||"Y-m-d";return new Date(1e3*e).toLocaleDateString(void 0,g(t))})(r[a]):"number"==typeof(l=r[a])?l.toLocaleString():null==l?"-":l.toString());var l}))))))))})()))},save:()=>null})}},r={};function n(e){var a=r[e];if(void 0!==a)return a.exports;var l=r[e]={exports:{}};return t[e](l,l.exports,n),l.exports}n.m=t,e=[],n.O=(t,r,a,l)=>{if(!r){var s=1/0;for(m=0;m<e.length;m++){for(var[r,a,l]=e[m],o=!0,c=0;c<r.length;c++)(!1&l||s>=l)&&Object.keys(n.O).every((e=>n.O[e](r[c])))?r.splice(c--,1):(o=!1,l<s&&(s=l));if(o){e.splice(m--,1);var i=a();void 0!==i&&(t=i)}}return t}l=l||0;for(var m=e.length;m>0&&e[m-1][2]>l;m--)e[m]=e[m-1];e[m]=[r,a,l]},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};n.O.j=t=>0===e[t];var t=(t,r)=>{var a,l,[s,o,c]=r,i=0;if(s.some((t=>0!==e[t]))){for(a in o)n.o(o,a)&&(n.m[a]=o[a]);if(c)var m=c(n)}for(t&&t(r);i<s.length;i++)l=s[i],n.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return n.O(m)},r=globalThis.webpackChunk_nhrst_smartsync_table_table_block=globalThis.webpackChunk_nhrst_smartsync_table_table_block||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var a=n.O(void 0,[350],(()=>n(74)));a=n.O(a)})();